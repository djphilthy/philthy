<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>philthy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      margin: 0;
      padding: 32px;
      background: #000;
      color: #fff;
      font-family: "Courier New", Courier, monospace;
      font-size: 16px;
      line-height: 1.6;
    }

    a {
      color: #fff;
      text-decoration: none;
      cursor: pointer;
    }

    a:hover {
      text-decoration: underline;
    }

    .container {
      max-width: 720px;
      position: relative;
      z-index: 10; /* Keeps text above video */
    }

    .title {
      font-weight: bold;
      margin-bottom: 24px;
    }

    .track {
      margin-bottom: 6px;
    }

    .player {
      display: none;
      margin-bottom: 14px;
    }

    audio {
      width: 100%;
      height: 28px;
      background: #000;
      filter: invert(1) grayscale(1);
    }

    /* Invert colors for audio player controls */
    audio::-webkit-media-controls-panel { background: #000; }
    audio::-webkit-media-controls-play-button,
    audio::-webkit-media-controls-timeline,
    audio::-webkit-media-controls-current-time-display,
    audio::-webkit-media-controls-time-remaining-display,
    audio::-webkit-media-controls-mute-button,
    audio::-webkit-media-controls-volume-slider {
      filter: invert(1);
    }

    /* --- VIDEO BACKGROUND STYLES --- */
    #bgVideo {
        position: fixed;
        right: 0;
        bottom: 0;
        min-width: 100%;
        min-height: 100%;
        z-index: -2;          /* Behind everything */
        object-fit: cover;    /* Covers screen */
        opacity: 0;           /* Start hidden */
        transition: opacity 1.5s ease; /* Slow fade in/out */
    }

    #bgVideo.visible {
        opacity: 1;
    }

    #videoOverlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6); /* 60% Darkness overlay */
        z-index: -1;          /* Between video and text */
        pointer-events: none; /* Click-through allowed */
    }
  </style>
</head>
<body>

  <video id="bgVideo" muted loop playsinline></video>
  <div id="videoOverlay"></div>

  <div class="container">
    <div class="title">philthy</div>

    <div class="track"><a class="play" data-src="mixes/ORDON U GET.mp3">ORDON U GET.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/HILLBILLY HEART.mp3">HILLBILLY HEART.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/SORT_OF.mp3">SORT_OF.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/FLACKO_NU_GENEA.mp3">FLACKO_NU_GENEA.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/I_RAN_FANETO.mp3">I_RAN_FANETO.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/CHROMOHEAD.mp3">CHROMOHEAD.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/SUNDRESS_ARREST.mp3">SUNDRESS_ARREST.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/ON_SAKURA.mp3">ON_SAKURA.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/STAY_LOCATION.mp3">STAY_LOCATION.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/COP_LIGHTS.mp3">COP_LIGHTS.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/MEGAMAN_EMPIRE.mp3">MEGAMAN_EMPIRE.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>

    <div class="track"><a class="play" data-src="mixes/I_LIKE_TO_STAY_HIGH.mp3">I_LIKE_TO_STAY_HIGH.mp3</a></div>
    <div class="player"><audio controls preload="none"></audio></div>
  </div>

  <script>
    const links = Array.from(document.querySelectorAll("a.play"));
    const allAudios = Array.from(document.querySelectorAll("audio"));
    
    // --- VIDEO LOGIC ---
    const bgVideo = document.getElementById("bgVideo");
    
    // List of your videos
    const videoList = [
      "movies/IMG_6972.mp4",
      "movies/IMG_6980.mp4",
      "movies/IMG_6782.mp4"
    ];

    function playRandomVideo() {
        // Pick a random video from the list
        const randomVid = videoList[Math.floor(Math.random() * videoList.length)];
        bgVideo.src = randomVid;
        bgVideo.play();
        bgVideo.classList.add("visible"); // Triggers fade in
    }

    function stopVideo() {
        bgVideo.classList.remove("visible"); // Triggers fade out
        // Pause video after fade completes (1.5s) to save resources
        setTimeout(() => {
            bgVideo.pause();
        }, 1500); 
    }

    // --- AUDIO LOGIC ---

    function closeAll(except = null) {
      links.forEach(link => {
        if (link === except) return;
        const player = link.parentElement.nextElementSibling;
        if (!player) return;
        const audio = player.querySelector("audio");
        audio.pause();
        audio.removeAttribute("src");
        audio.load();
        player.style.display = "none";
      });
    }

    links.forEach(link => {
      // Setup the audio player next to the link
      const player = link.parentElement.nextElementSibling;
      const audio = player.querySelector("audio");

      // 1. Add "Ended" listener to fade video out when song finishes
      audio.onended = () => {
          stopVideo();
          audio.removeAttribute("src");
          audio.load();
          player.style.display = "none";
      };

      // 2. Click Handler
      link.addEventListener("click", e => {
        e.preventDefault();
        const open = player.style.display === "block";

        if (open) {
          // If clicking active song: Pause it and Fade Out Video
          stopVideo();
          audio.pause();
          audio.removeAttribute("src");
          audio.load();
          player.style.display = "none";
          return;
        }

        // If clicking new song: Close others, Play Audio, Fade In Video
        closeAll(link);
        player.style.display = "block";
        audio.src = link.dataset.src;
        
        // Play Audio and Video
        audio.play().catch(() => {});
        playRandomVideo();
      });
    });
  </script>
</body>
</html>