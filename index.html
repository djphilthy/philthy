<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>philthy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* --- CORE STYLES --- */
    body {
      margin: 0;
      padding: 32px;
      background: #000;
      color: #fff;
      font-family: "Courier New", Courier, monospace;
      font-size: 16px;
      line-height: 1.6;
    }

    a {
      color: #fff;
      text-decoration: none;
      cursor: pointer;
    }

    a:hover {
      text-decoration: underline;
      background-color: #fff;
      color: #000;
    }

    .container {
      max-width: 720px;
      position: relative;
      z-index: 10;
    }

    .title {
      font-weight: bold;
      margin-bottom: 32px;
      font-size: 24px;
      letter-spacing: -1px;
    }

    /* --- TRACK LIST STYLES --- */
    .track-wrapper {
        margin-bottom: 12px;
    }

    .track-name {
        display: block;
        margin-bottom: 4px;
        font-weight: bold;
    }

    /* --- CUSTOM TERMINAL PLAYER --- */
    .custom-player {
        display: none; /* Hidden by default */
        border: 1px solid #fff;
        padding: 8px 12px;
        margin-bottom: 24px;
        background: #000;
        align-items: center;
        gap: 12px;
        font-family: "Courier New", Courier, monospace;
    }

    /* The [PLAY] / [STOP] Button */
    .play-btn {
        background: none;
        border: none;
        color: #fff;
        font-family: inherit;
        font-size: 16px;
        cursor: pointer;
        padding: 0;
        min-width: 60px;
        text-align: left;
    }
    .play-btn:hover {
        text-decoration: underline;
    }

    /* The Progress Bar Container */
    .progress-container {
        flex-grow: 1;
        height: 14px;
        background: #333; /* Dark grey track */
        cursor: pointer;
        position: relative;
        border: 1px solid #fff;
    }

    /* The Moving Fill */
    .progress-fill {
        height: 100%;
        background: #fff;
        width: 0%;
        transition: width 0.1s linear; /* Smooth movement */
    }

    /* Time Display 00:00 */
    .time-display {
        font-size: 14px;
        min-width: 50px;
        text-align: right;
    }

    /* --- VIDEO BACKGROUND --- */
    #bgVideo {
        position: fixed;
        right: 0;
        bottom: 0;
        min-width: 100%;
        min-height: 100%;
        width: auto;
        height: auto;
        z-index: -2;
        object-fit: cover;
        opacity: 0;
        transition: opacity 1.5s ease;
    }

    #bgVideo.visible {
        opacity: 1;
    }

    #videoOverlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        z-index: -1;
        pointer-events: none;
    }
  </style>
</head>
<body>

  <video id="bgVideo" muted loop playsinline></video>
  <div id="videoOverlay"></div>

  <div class="container">
    <div class="title">philthy_terminal_v1</div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/ORDON U GET.mp3">ORDON U GET.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container">
                <div class="progress-fill"></div>
            </div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio> 
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/HILLBILLY HEART.mp3">HILLBILLY HEART.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/SORT_OF.mp3">SORT_OF.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/FLACKO_NU_GENEA.mp3">FLACKO_NU_GENEA.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/I_RAN_FANETO.mp3">I_RAN_FANETO.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/CHROMOHEAD.mp3">CHROMOHEAD.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/SUNDRESS_ARREST.mp3">SUNDRESS_ARREST.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/ON_SAKURA.mp3">ON_SAKURA.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/STAY_LOCATION.mp3">STAY_LOCATION.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/COP_LIGHTS.mp3">COP_LIGHTS.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/MEGAMAN_EMPIRE.mp3">MEGAMAN_EMPIRE.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

    <div class="track-wrapper">
        <a class="track-name" data-src="mixes/I_LIKE_TO_STAY_HIGH.mp3">I_LIKE_TO_STAY_HIGH.mp3</a>
        <div class="custom-player">
            <button class="play-btn">[PLAY]</button>
            <div class="progress-container"><div class="progress-fill"></div></div>
            <span class="time-display">00:00</span>
        </div>
        <audio preload="none"></audio>
    </div>

  </div>

  <script>
    // --- VIDEO LOGIC ---
    const bgVideo = document.getElementById("bgVideo");
    const videoList = [
      "movies/IMG_6972.mp4",
      "movies/IMG_6980.mp4",
      "movies/IMG_6782.mp4"
    ];

    function playRandomVideo() {
        const randomVid = videoList[Math.floor(Math.random() * videoList.length)];
        bgVideo.src = randomVid;
        bgVideo.play().catch(e => console.log("Video play failed", e));
        bgVideo.classList.add("visible");
    }

    function stopVideo() {
        bgVideo.classList.remove("visible");
        setTimeout(() => { bgVideo.pause(); }, 1500); 
    }

    // --- AUDIO & UI LOGIC ---

    // Helper: Close all other players
    function closeAllPlayers(exceptWrapper = null) {
        document.querySelectorAll('.track-wrapper').forEach(wrapper => {
            if (wrapper === exceptWrapper) return;
            
            // Hide UI
            wrapper.querySelector('.custom-player').style.display = 'none';
            
            // Reset Audio
            const audio = wrapper.querySelector('audio');
            if(audio) {
                audio.pause();
                audio.currentTime = 0;
            }
            
            // Reset Buttons
            const btn = wrapper.querySelector('.play-btn');
            if(btn) btn.innerText = "[PLAY]";
        });
    }

    // Helper: Format Seconds into MM:SS
    function formatTime(seconds) {
        if (!seconds || isNaN(seconds)) return "00:00";
        const m = Math.floor(seconds / 60);
        const s = Math.floor(seconds % 60);
        return `${m < 10 ? '0' : ''}${m}:${s < 10 ? '0' : ''}${s}`;
    }

    // Main Logic Loop
    document.querySelectorAll('.track-wrapper').forEach(wrapper => {
        const link = wrapper.querySelector('.track-name');
        const playerUI = wrapper.querySelector('.custom-player');
        const playBtn = wrapper.querySelector('.play-btn');
        const progressBar = wrapper.querySelector('.progress-fill');
        const progressContainer = wrapper.querySelector('.progress-container');
        const timeDisplay = wrapper.querySelector('.time-display');
        const audio = wrapper.querySelector('audio');

        // 1. LINK CLICK: Open Player & Start
        link.addEventListener('click', (e) => {
            e.preventDefault();
            
            // If already open, just toggle close
            if (playerUI.style.display === 'flex') {
                audio.pause();
                playerUI.style.display = 'none';
                playBtn.innerText = "[PLAY]";
                stopVideo();
                return;
            }

            // Close others, Open this one
            closeAllPlayers(wrapper);
            playerUI.style.display = 'flex';
            
            // Set Source & Play
            if (!audio.src) audio.src = link.dataset.src;
            audio.play();
            playBtn.innerText = "[STOP]"; // Playing state
            playRandomVideo();

            // Set Lock Screen Info
            if ('mediaSession' in navigator) {
                navigator.mediaSession.metadata = new MediaMetadata({
                    title: link.innerText.replace('.mp3', ''),
                    artist: "Philthy",
                });
            }
        });

        // 2. PLAY BUTTON CLICK: Toggle Play/Pause
        playBtn.addEventListener('click', () => {
            if (audio.paused) {
                audio.play();
                playBtn.innerText = "[STOP]";
                playRandomVideo();
            } else {
                audio.pause();
                playBtn.innerText = "[PLAY]";
                stopVideo();
            }
        });

        // 3. PROGRESS BAR LOGIC (Visual Update)
        audio.addEventListener('timeupdate', () => {
            const percent = (audio.currentTime / audio.duration) * 100;
            progressBar.style.width = percent + "%";
            timeDisplay.innerText = formatTime(audio.currentTime);
        });

        // 4. CLICKABLE PROGRESS BAR (Seeking)
        progressContainer.addEventListener('click', (e) => {
            const width = progressContainer.clientWidth;
            const clickX = e.offsetX;
            const duration = audio.duration;
            audio.currentTime = (clickX / width) * duration;
        });

        // 5. AUDIO ENDED
        audio.addEventListener('ended', () => {
            playBtn.innerText = "[PLAY]";
            stopVideo();
            progressBar.style.width = "0%";
            // Optional: Close player automatically? 
            // playerUI.style.display = 'none'; 
        });
    });
  </script>
</body>
</html>
